{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2419406\\\\Downloads\\\\react-client-app-for-api\\\\src\\\\components\\\\Welcome.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Welcome = () => {\n  _s();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState(null);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  // Fetch profile data\n  useEffect(() => {\n    const email = localStorage.getItem('email');\n    const role = localStorage.getItem('role');\n    const token = localStorage.getItem('token');\n    if (!email || !role || !token) {\n      alert(\"Missing credentials. Please log in again.\");\n      localStorage.clear();\n      navigate(\"/login\");\n      return;\n    }\n    const headers = {\n      Authorization: `Bearer ${token}`\n    };\n    const url = role === 'Admin' ? `http://localhost:5144/Admin/Profile?email=${email}` : `http://localhost:5144/User/Profile?email=${email}`;\n    axios.get(url, {\n      headers\n    }).then(res => {\n      setProfile(res.data);\n      setLoading(false);\n    }).catch(err => {\n      console.error(\"Profile fetch failed:\", err);\n      setError(\"Failed to fetch profile. Please try again.\");\n      setLoading(false);\n    });\n  }, [navigate]);\n  const handleLogout = () => {\n    localStorage.clear();\n    navigate('/login');\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.loading,\n    children: \"Loading profile...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.error,\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.card,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Welcome, \", profile.name || 'User', \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: profile.profileImageUrl || '/default-profile.png',\n        alt: \"Profile\",\n        style: styles.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 12\n        }, this), \" \", profile.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Role:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 12\n        }, this), \" \", profile.role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        style: styles.button,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n_s(Welcome, \"3QfsnqyH0w1+hKTOWqRddftWQHs=\", false, function () {\n  return [useNavigate];\n});\n_c = Welcome;\nconst styles = {\n  container: {\n    display: 'flex',\n    justifyContent: 'center',\n    marginTop: '50px'\n  },\n  card: {\n    padding: '20px',\n    borderRadius: '10px',\n    border: '1px solid #ccc',\n    width: '350px',\n    textAlign: 'center',\n    backgroundColor: '#f9f9f9',\n    boxShadow: '0 0 10px rgba(0,0,0,0.1)'\n  },\n  image: {\n    width: '150px',\n    height: '150px',\n    borderRadius: '50%',\n    objectFit: 'cover',\n    marginBottom: '20px'\n  },\n  button: {\n    padding: '10px 20px',\n    border: 'none',\n    backgroundColor: '#007bff',\n    color: 'white',\n    cursor: 'pointer',\n    borderRadius: '5px'\n  },\n  error: {\n    color: 'red',\n    textAlign: 'center',\n    marginTop: '50px'\n  },\n  loading: {\n    textAlign: 'center',\n    marginTop: '50px',\n    fontSize: '18px'\n  }\n};\nexport default Welcome;\nvar _c;\n$RefreshReg$(_c, \"Welcome\");","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsxDEV","_jsxDEV","Welcome","_s","navigate","profile","setProfile","error","setError","loading","setLoading","email","localStorage","getItem","role","token","alert","clear","headers","Authorization","url","get","then","res","data","catch","err","console","handleLogout","style","styles","children","fileName","_jsxFileName","lineNumber","columnNumber","container","card","name","src","profileImageUrl","alt","image","onClick","button","_c","display","justifyContent","marginTop","padding","borderRadius","border","width","textAlign","backgroundColor","boxShadow","height","objectFit","marginBottom","color","cursor","fontSize","$RefreshReg$"],"sources":["C:/Users/2419406/Downloads/react-client-app-for-api/src/components/Welcome.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Welcome = () => {\r\n  const navigate = useNavigate();\r\n\r\n  const [profile, setProfile] = useState(null);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch profile data\r\n  useEffect(() => {\r\n    const email = localStorage.getItem('email');\r\n    const role = localStorage.getItem('role');\r\n    const token = localStorage.getItem('token');\r\n\r\n    if (!email || !role || !token) {\r\n      alert(\"Missing credentials. Please log in again.\");\r\n      localStorage.clear();\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${token}`,\r\n    };\r\n\r\n    const url =\r\n      role === 'Admin'\r\n        ? `http://localhost:5144/Admin/Profile?email=${email}`\r\n        : `http://localhost:5144/User/Profile?email=${email}`;\r\n\r\n    axios\r\n      .get(url, { headers })\r\n      .then((res) => {\r\n        setProfile(res.data);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.error(\"Profile fetch failed:\", err);\r\n        setError(\"Failed to fetch profile. Please try again.\");\r\n        setLoading(false);\r\n      });\r\n  }, [navigate]);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.clear();\r\n    navigate('/login');\r\n  };\r\n\r\n  if (loading) return <div style={styles.loading}>Loading profile...</div>;\r\n  if (error) return <div style={styles.error}>{error}</div>;\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <div style={styles.card}>\r\n        <h2>Welcome, {profile.name || 'User'}!</h2>\r\n        <img\r\n          src={profile.profileImageUrl || '/default-profile.png'}\r\n          alt=\"Profile\"\r\n          style={styles.image}\r\n        />\r\n        <p><strong>Email:</strong> {profile.email}</p>\r\n        <p><strong>Role:</strong> {profile.role}</p>\r\n        <button onClick={handleLogout} style={styles.button}>Logout</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst styles = {\r\n  container: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    marginTop: '50px',\r\n  },\r\n  card: {\r\n    padding: '20px',\r\n    borderRadius: '10px',\r\n    border: '1px solid #ccc',\r\n    width: '350px',\r\n    textAlign: 'center',\r\n    backgroundColor: '#f9f9f9',\r\n    boxShadow: '0 0 10px rgba(0,0,0,0.1)',\r\n  },\r\n  image: {\r\n    width: '150px',\r\n    height: '150px',\r\n    borderRadius: '50%',\r\n    objectFit: 'cover',\r\n    marginBottom: '20px',\r\n  },\r\n  button: {\r\n    padding: '10px 20px',\r\n    border: 'none',\r\n    backgroundColor: '#007bff',\r\n    color: 'white',\r\n    cursor: 'pointer',\r\n    borderRadius: '5px',\r\n  },\r\n  error: {\r\n    color: 'red',\r\n    textAlign: 'center',\r\n    marginTop: '50px',\r\n  },\r\n  loading: {\r\n    textAlign: 'center',\r\n    marginTop: '50px',\r\n    fontSize: '18px',\r\n  },\r\n};\r\n\r\nexport default Welcome;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}