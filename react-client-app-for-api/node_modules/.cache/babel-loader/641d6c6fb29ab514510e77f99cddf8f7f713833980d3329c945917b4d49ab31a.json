{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE=\"http://localhost:5144/Category\";const getConfig=()=>({headers:{Authorization:\"Bearer \".concat(localStorage.getItem(\"token\"))}});function CategoryPanel(){const[categories,setCategories]=useState([]);const[newCategory,setNewCategory]=useState(\"\");const[editId,setEditId]=useState(null);const[editName,setEditName]=useState(\"\");// Fetch categories\nconst fetchCategories=async()=>{try{const res=await axios.get(API_BASE);setCategories(res.data);}catch(err){console.error(\"Error fetching categories\",err);}};// Add category\nconst addCategory=async()=>{if(!newCategory.trim()){alert(\"Please enter category name\");return;}try{await axios.post(\"\".concat(API_BASE,\"/AddingNewCategory\"),{name:newCategory},getConfig());setNewCategory(\"\");fetchCategories();}catch(err){console.error(\"Error adding category\",err);}};// Update category\nconst updateCategory=async id=>{try{await axios.put(\"\".concat(API_BASE,\"/UpdateCategory?id=\").concat(id),{categoryId:id,name:editName},getConfig());setEditId(null);setEditName(\"\");fetchCategories();}catch(err){console.error(\"Error updating category\",err);}};// Delete category\nconst deleteCategory=async id=>{if(window.confirm(\"Are you sure you want to delete this category?\")){try{await axios.delete(\"\".concat(API_BASE,\"/DeleteCategory?id=\").concat(id),getConfig());fetchCategories();}catch(err){console.error(\"Error deleting category\",err);}}};useEffect(()=>{fetchCategories();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mb-4\",children:\"Manage Categories\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Category Name\",value:newCategory,onChange:e=>setNewCategory(e.target.value),className:\"form-control me-2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:addCategory,children:\"Add Category\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"table-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Category Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{width:\"200px\"},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:categories.length>0?categories.map(cat=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cat.categoryId}),/*#__PURE__*/_jsx(\"td\",{children:editId===cat.categoryId?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editName,onChange:e=>setEditName(e.target.value),className:\"form-control\"}):cat.name}),/*#__PURE__*/_jsx(\"td\",{children:editId===cat.categoryId?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm me-2\",onClick:()=>updateCategory(cat.categoryId),children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-sm\",onClick:()=>{setEditId(null);setEditName(\"\");},children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm me-2\",onClick:()=>{setEditId(cat.categoryId);setEditName(cat.name);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:()=>deleteCategory(cat.categoryId),children:\"Delete\"})]})})]},cat.categoryId)):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",className:\"text-center\",children:\"No categories found.\"})})})]})]});}export default CategoryPanel;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE","getConfig","headers","Authorization","concat","localStorage","getItem","CategoryPanel","categories","setCategories","newCategory","setNewCategory","editId","setEditId","editName","setEditName","fetchCategories","res","get","data","err","console","error","addCategory","trim","alert","post","name","updateCategory","id","put","categoryId","deleteCategory","window","confirm","delete","className","children","type","placeholder","value","onChange","e","target","onClick","style","width","length","map","cat","colSpan"],"sources":["/workspaces/ECommerceWebApi_React/react-client-app-for-api/src/components/CategoryPanel.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst API_BASE = \"http://localhost:5144/Category\";\n\nconst getConfig = () => ({\n  headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` }\n});\n\nfunction CategoryPanel() {\n  const [categories, setCategories] = useState([]);\n  const [newCategory, setNewCategory] = useState(\"\");\n  const [editId, setEditId] = useState(null);\n  const [editName, setEditName] = useState(\"\");\n\n  // Fetch categories\n  const fetchCategories = async () => {\n    try {\n      const res = await axios.get(API_BASE);\n      setCategories(res.data);\n    } catch (err) {\n      console.error(\"Error fetching categories\", err);\n    }\n  };\n\n  // Add category\n  const addCategory = async () => {\n    if (!newCategory.trim()) {\n      alert(\"Please enter category name\");\n      return;\n    }\n    try {\n      await axios.post(`${API_BASE}/AddingNewCategory`, { name: newCategory }, getConfig());\n      setNewCategory(\"\");\n      fetchCategories();\n    } catch (err) {\n      console.error(\"Error adding category\", err);\n    }\n  };\n\n  // Update category\n  const updateCategory = async (id) => {\n    try {\n      await axios.put(`${API_BASE}/UpdateCategory?id=${id}`, { categoryId: id, name: editName }, getConfig());\n      setEditId(null);\n      setEditName(\"\");\n      fetchCategories();\n    } catch (err) {\n      console.error(\"Error updating category\", err);\n    }\n  };\n\n  // Delete category\n  const deleteCategory = async (id) => {\n    if (window.confirm(\"Are you sure you want to delete this category?\")) {\n      try {\n        await axios.delete(`${API_BASE}/DeleteCategory?id=${id}`, getConfig());\n        fetchCategories();\n      } catch (err) {\n        console.error(\"Error deleting category\", err);\n      }\n    }\n  };\n\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  return (\n    <div className=\"container mt-4\">\n      <h2 className=\"mb-4\">Manage Categories</h2>\n\n      {/* Add Form */}\n      <div className=\"d-flex mb-3\">\n        <input\n          type=\"text\"\n          placeholder=\"Category Name\"\n          value={newCategory}\n          onChange={(e) => setNewCategory(e.target.value)}\n          className=\"form-control me-2\"\n        />\n        <button className=\"btn btn-success\" onClick={addCategory}>\n          Add Category\n        </button>\n      </div>\n\n      {/* Table */}\n      <table className=\"table table-striped table-bordered\">\n        <thead className=\"table-dark\">\n          <tr>\n            <th>Category Id</th>\n            <th>Name</th>\n            <th style={{ width: \"200px\" }}>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          {categories.length > 0 ? (\n            categories.map((cat) => (\n              <tr key={cat.categoryId}>\n                <td>{cat.categoryId}</td>\n                <td>\n                  {editId === cat.categoryId ? (\n                    <input\n                      type=\"text\"\n                      value={editName}\n                      onChange={(e) => setEditName(e.target.value)}\n                      className=\"form-control\"\n                    />\n                  ) : (\n                    cat.name\n                  )}\n                </td>\n                <td>\n                  {editId === cat.categoryId ? (\n                    <>\n                      <button\n                        className=\"btn btn-success btn-sm me-2\"\n                        onClick={() => updateCategory(cat.categoryId)}\n                      >\n                        Save\n                      </button>\n                      <button\n                        className=\"btn btn-secondary btn-sm\"\n                        onClick={() => {\n                          setEditId(null);\n                          setEditName(\"\");\n                        }}\n                      >\n                        Cancel\n                      </button>\n                    </>\n                  ) : (\n                    <>\n                      <button\n                        className=\"btn btn-primary btn-sm me-2\"\n                        onClick={() => {\n                          setEditId(cat.categoryId);\n                          setEditName(cat.name);\n                        }}\n                      >\n                        Edit\n                      </button>\n                      <button\n                        className=\"btn btn-danger btn-sm\"\n                        onClick={() => deleteCategory(cat.categoryId)}\n                      >\n                        Delete\n                      </button>\n                    </>\n                  )}\n                </td>\n              </tr>\n            ))\n          ) : (\n            <tr>\n              <td colSpan=\"3\" className=\"text-center\">\n                No categories found.\n              </td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default CategoryPanel;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE1B,KAAM,CAAAC,QAAQ,CAAG,gCAAgC,CAEjD,KAAM,CAAAC,SAAS,CAAGA,CAAA,IAAO,CACvBC,OAAO,CAAE,CAAEC,aAAa,WAAAC,MAAA,CAAYC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAG,CACtE,CAAC,CAAC,CAEF,QAAS,CAAAC,aAAaA,CAAA,CAAG,CACvB,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAChD,KAAM,CAACmB,WAAW,CAAEC,cAAc,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACqB,MAAM,CAAEC,SAAS,CAAC,CAAGtB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACuB,QAAQ,CAAEC,WAAW,CAAC,CAAGxB,QAAQ,CAAC,EAAE,CAAC,CAE5C;AACA,KAAM,CAAAyB,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAxB,KAAK,CAACyB,GAAG,CAAClB,QAAQ,CAAC,CACrCS,aAAa,CAACQ,GAAG,CAACE,IAAI,CAAC,CACzB,CAAE,MAAOC,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,CAAEF,GAAG,CAAC,CACjD,CACF,CAAC,CAED;AACA,KAAM,CAAAG,WAAW,CAAG,KAAAA,CAAA,GAAY,CAC9B,GAAI,CAACb,WAAW,CAACc,IAAI,CAAC,CAAC,CAAE,CACvBC,KAAK,CAAC,4BAA4B,CAAC,CACnC,OACF,CACA,GAAI,CACF,KAAM,CAAAhC,KAAK,CAACiC,IAAI,IAAAtB,MAAA,CAAIJ,QAAQ,uBAAsB,CAAE2B,IAAI,CAAEjB,WAAY,CAAC,CAAET,SAAS,CAAC,CAAC,CAAC,CACrFU,cAAc,CAAC,EAAE,CAAC,CAClBK,eAAe,CAAC,CAAC,CACnB,CAAE,MAAOI,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,uBAAuB,CAAEF,GAAG,CAAC,CAC7C,CACF,CAAC,CAED;AACA,KAAM,CAAAQ,cAAc,CAAG,KAAO,CAAAC,EAAE,EAAK,CACnC,GAAI,CACF,KAAM,CAAApC,KAAK,CAACqC,GAAG,IAAA1B,MAAA,CAAIJ,QAAQ,wBAAAI,MAAA,CAAsByB,EAAE,EAAI,CAAEE,UAAU,CAAEF,EAAE,CAAEF,IAAI,CAAEb,QAAS,CAAC,CAAEb,SAAS,CAAC,CAAC,CAAC,CACvGY,SAAS,CAAC,IAAI,CAAC,CACfE,WAAW,CAAC,EAAE,CAAC,CACfC,eAAe,CAAC,CAAC,CACnB,CAAE,MAAOI,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC/C,CACF,CAAC,CAED;AACA,KAAM,CAAAY,cAAc,CAAG,KAAO,CAAAH,EAAE,EAAK,CACnC,GAAII,MAAM,CAACC,OAAO,CAAC,gDAAgD,CAAC,CAAE,CACpE,GAAI,CACF,KAAM,CAAAzC,KAAK,CAAC0C,MAAM,IAAA/B,MAAA,CAAIJ,QAAQ,wBAAAI,MAAA,CAAsByB,EAAE,EAAI5B,SAAS,CAAC,CAAC,CAAC,CACtEe,eAAe,CAAC,CAAC,CACnB,CAAE,MAAOI,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,CAAEF,GAAG,CAAC,CAC/C,CACF,CACF,CAAC,CAED5B,SAAS,CAAC,IAAM,CACdwB,eAAe,CAAC,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEnB,KAAA,QAAKuC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B1C,IAAA,OAAIyC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,mBAAiB,CAAI,CAAC,cAG3CxC,KAAA,QAAKuC,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1C,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,eAAe,CAC3BC,KAAK,CAAE9B,WAAY,CACnB+B,QAAQ,CAAGC,CAAC,EAAK/B,cAAc,CAAC+B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChDJ,SAAS,CAAC,mBAAmB,CAC9B,CAAC,cACFzC,IAAA,WAAQyC,SAAS,CAAC,iBAAiB,CAACQ,OAAO,CAAErB,WAAY,CAAAc,QAAA,CAAC,cAE1D,CAAQ,CAAC,EACN,CAAC,cAGNxC,KAAA,UAAOuC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,eACnD1C,IAAA,UAAOyC,SAAS,CAAC,YAAY,CAAAC,QAAA,cAC3BxC,KAAA,OAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAI,aAAW,CAAI,CAAC,cACpB1C,IAAA,OAAA0C,QAAA,CAAI,MAAI,CAAI,CAAC,cACb1C,IAAA,OAAIkD,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAQ,CAAE,CAAAT,QAAA,CAAC,SAAO,CAAI,CAAC,EACzC,CAAC,CACA,CAAC,cACR1C,IAAA,UAAA0C,QAAA,CACG7B,UAAU,CAACuC,MAAM,CAAG,CAAC,CACpBvC,UAAU,CAACwC,GAAG,CAAEC,GAAG,eACjBpD,KAAA,OAAAwC,QAAA,eACE1C,IAAA,OAAA0C,QAAA,CAAKY,GAAG,CAAClB,UAAU,CAAK,CAAC,cACzBpC,IAAA,OAAA0C,QAAA,CACGzB,MAAM,GAAKqC,GAAG,CAAClB,UAAU,cACxBpC,IAAA,UACE2C,IAAI,CAAC,MAAM,CACXE,KAAK,CAAE1B,QAAS,CAChB2B,QAAQ,CAAGC,CAAC,EAAK3B,WAAW,CAAC2B,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAC7CJ,SAAS,CAAC,cAAc,CACzB,CAAC,CAEFa,GAAG,CAACtB,IACL,CACC,CAAC,cACLhC,IAAA,OAAA0C,QAAA,CACGzB,MAAM,GAAKqC,GAAG,CAAClB,UAAU,cACxBlC,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACE1C,IAAA,WACEyC,SAAS,CAAC,6BAA6B,CACvCQ,OAAO,CAAEA,CAAA,GAAMhB,cAAc,CAACqB,GAAG,CAAClB,UAAU,CAAE,CAAAM,QAAA,CAC/C,MAED,CAAQ,CAAC,cACT1C,IAAA,WACEyC,SAAS,CAAC,0BAA0B,CACpCQ,OAAO,CAAEA,CAAA,GAAM,CACb/B,SAAS,CAAC,IAAI,CAAC,CACfE,WAAW,CAAC,EAAE,CAAC,CACjB,CAAE,CAAAsB,QAAA,CACH,QAED,CAAQ,CAAC,EACT,CAAC,cAEHxC,KAAA,CAAAE,SAAA,EAAAsC,QAAA,eACE1C,IAAA,WACEyC,SAAS,CAAC,6BAA6B,CACvCQ,OAAO,CAAEA,CAAA,GAAM,CACb/B,SAAS,CAACoC,GAAG,CAAClB,UAAU,CAAC,CACzBhB,WAAW,CAACkC,GAAG,CAACtB,IAAI,CAAC,CACvB,CAAE,CAAAU,QAAA,CACH,MAED,CAAQ,CAAC,cACT1C,IAAA,WACEyC,SAAS,CAAC,uBAAuB,CACjCQ,OAAO,CAAEA,CAAA,GAAMZ,cAAc,CAACiB,GAAG,CAAClB,UAAU,CAAE,CAAAM,QAAA,CAC/C,QAED,CAAQ,CAAC,EACT,CACH,CACC,CAAC,GApDEY,GAAG,CAAClB,UAqDT,CACL,CAAC,cAEFpC,IAAA,OAAA0C,QAAA,cACE1C,IAAA,OAAIuD,OAAO,CAAC,GAAG,CAACd,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,sBAExC,CAAI,CAAC,CACH,CACL,CACI,CAAC,EACH,CAAC,EACL,CAAC,CAEV,CAEA,cAAe,CAAA9B,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}