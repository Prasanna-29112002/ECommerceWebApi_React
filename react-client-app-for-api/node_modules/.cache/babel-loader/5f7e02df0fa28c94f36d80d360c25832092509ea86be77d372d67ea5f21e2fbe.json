{"ast":null,"code":"// App.js\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import'bootstrap/dist/css/bootstrap.min.css';import Login from'./components/Login';import Register from'./components/Register';import Welcome from'./components/Welcome';import CategoryPage from'./components/cards/Categories';import CategoryService from'./services/CategoryService';import AuthService from'./services/AuthService';import ProductList from'./components/ProductList';import AdminPanel from'./components/AdminPanel';import CategoryPanel from'./components/CategoryPanel';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[user,setUser]=useState(null);const[categories,setCategories]=useState([]);// On initial load, check token\nuseEffect(()=>{const token=AuthService.getToken();if(token){const user=AuthService.getUserFromToken(token);setUser(user);}},[]);// Fetch categories once user is logged in\nuseEffect(()=>{if(user){fetchCategories();}},[user]);const fetchCategories=async()=>{try{const response=await CategoryService.getCategories();const data=response.data;const nonEmptyCategories=data.filter(cat=>cat.items&&cat.items.length>0);setCategories(nonEmptyCategories);}catch(error){console.error('Error fetching categories:',error);}};const login=async(email,password)=>{try{const token=await AuthService.login(email,password);const user=AuthService.getUserFromToken(token);setUser(user);}catch(error){console.error('Error logging in',error);}};const logout=()=>{console.log(\"Logout called from App.js\");AuthService.logout();setUser(null);setCategories([]);};const allItems=categories.flatMap(cat=>cat.items.map(item=>({...item,categoryName:cat.name})));return/*#__PURE__*/_jsxs(Router,{children:[user&&allItems.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"All Items\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',overflowX:'auto',whiteSpace:'nowrap',padding:'10px',gap:'20px'},children:allItems.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{minWidth:'200px',padding:'15px',backgroundColor:'#f8f9fa',border:'1px solid #dee2e6',borderRadius:'8px',textAlign:'center',flexShrink:0},children:[/*#__PURE__*/_jsx(\"strong\",{children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',marginTop:'5px'},children:[\"Category: \",item.categoryName]})]},index))})]}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:!user?/*#__PURE__*/_jsx(Login,{login:login}):/*#__PURE__*/_jsx(Navigate,{to:\"/Welcome\"})}),/*#__PURE__*/_jsx(Route,{path:\"/productlist\",element:/*#__PURE__*/_jsx(ProductList,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/Welcome\",element:user?/*#__PURE__*/_jsx(Welcome,{logout:logout}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/categories\",element:user?/*#__PURE__*/_jsx(CategoryPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/adminpanel\",element:/*#__PURE__*/_jsx(AdminPanel,{})}),/*#__PURE__*/_jsx(Route,{path:\"/categorypanel\",element:/*#__PURE__*/_jsx(CategoryPanel,{})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","Login","Register","Welcome","CategoryPage","CategoryService","AuthService","ProductList","AdminPanel","CategoryPanel","jsx","_jsx","jsxs","_jsxs","App","user","setUser","categories","setCategories","token","getToken","getUserFromToken","fetchCategories","response","getCategories","data","nonEmptyCategories","filter","cat","items","length","error","console","login","email","password","logout","log","allItems","flatMap","map","item","categoryName","name","children","className","style","display","overflowX","whiteSpace","padding","gap","index","minWidth","backgroundColor","border","borderRadius","textAlign","flexShrink","fontSize","marginTop","path","element","to"],"sources":["/workspaces/ECommerceWebApi_React/react-client-app-for-api/src/App.js"],"sourcesContent":["// App.js\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport Welcome from './components/Welcome';\nimport CategoryPage from './components/cards/Categories';\nimport CategoryService from './services/CategoryService';\nimport AuthService from './services/AuthService';\nimport ProductList from './components/ProductList';\nimport AdminPanel from './components/AdminPanel';\nimport CategoryPanel from './components/CategoryPanel';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [categories, setCategories] = useState([]);\n\n  // On initial load, check token\n  useEffect(() => {\n    const token = AuthService.getToken();\n    if (token) {\n      const user = AuthService.getUserFromToken(token);\n      setUser(user);\n    }\n  }, []);\n\n  // Fetch categories once user is logged in\n  useEffect(() => {\n    if (user) {\n      fetchCategories();\n    }\n  }, [user]);\n\n  const fetchCategories = async () => {\n    try {\n      const response = await CategoryService.getCategories();\n      const data = response.data;\n      const nonEmptyCategories = data.filter(cat => cat.items && cat.items.length > 0);\n      setCategories(nonEmptyCategories);\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n    }\n  };\n\n  const login = async (email, password) => {\n    try {\n      const token = await AuthService.login(email, password);\n      const user = AuthService.getUserFromToken(token);\n      setUser(user);\n    } catch (error) {\n      console.error('Error logging in', error);\n    }\n  };\n\n  const logout = () => {\n    console.log(\"Logout called from App.js\");\n    AuthService.logout();\n    setUser(null);\n    setCategories([]);\n  };\n\n  const allItems = categories.flatMap(cat =>\n    cat.items.map(item => ({\n      ...item,\n      categoryName: cat.name,\n    }))\n  );\n\n  return (\n    <Router>\n      {user && allItems.length > 0 && (\n        <div className=\"container mt-4\">\n          <h4 className=\"mb-3\">All Items</h4>\n          <div\n            style={{\n              display: 'flex',\n              overflowX: 'auto',\n              whiteSpace: 'nowrap',\n              padding: '10px',\n              gap: '20px',\n            }}\n          >\n            {allItems.map((item, index) => (\n              <div\n                key={index}\n                style={{\n                  minWidth: '200px',\n                  padding: '15px',\n                  backgroundColor: '#f8f9fa',\n                  border: '1px solid #dee2e6',\n                  borderRadius: '8px',\n                  textAlign: 'center',\n                  flexShrink: 0,\n                }}\n              >\n                <strong>{item.name}</strong>\n                <div style={{ fontSize: '12px', marginTop: '5px' }}>\n                  Category: {item.categoryName}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      <Routes>\n        <Route path=\"/\" element={<Navigate to=\"/login\" />} />\n        <Route path=\"/login\" element={!user ? <Login login={login} /> : <Navigate to=\"/Welcome\" />} />\n        <Route path=\"/productlist\" element={<ProductList />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/Welcome\" element={user ? <Welcome logout={logout} /> : <Navigate to=\"/login\" />} />\n        <Route path=\"/categories\" element={user ? <CategoryPage /> : <Navigate to=\"/login\" />} />\n        <Route path=\"/adminpanel\" element={<AdminPanel/>}/>\n      <Route path=\"/categorypanel\" element={<CategoryPanel/>}/>\n        \n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}